[
    // install basic debian system
    {
        "type": "debian",
        "name": "debian directory",
        "export": false,

        "include": [
            "initramfs-tools",
            "plymouth",
            "plymouth-themes",

            // systemd
            "systemd",
            "systemd-sysv",
            "systemd-resolved",
            "dbus",
            "dbus-user-session",

            // audio
            "pipewire",
            "pipewire-alsa",
            "pipewire-pulse",
            "wireplumber",
            "libpipewire-0.3-0",

            // graphic
            "weston",
            "fonts-dejavu",
            "sddm",

            // system
            "bindfs",
            "upower",

            // nodejs
            "nodejs",
            "npm",

            // runtimes
            "flatpak",

            // apps

            // libs
            "libnspr4",
            "libnss3",
            "libxss1",
            "libasound2",
            "libatk1.0-0",
            "libatk-bridge2.0-0",
            "libxcomposite1",
            "libxcursor1",
            "libxdamage1",
            "libxrandr2",
            "libxkbcommon0",
            "libwayland-client0",
            "libwayland-egl1",
            "libgbm1",
            "libgtk-3-0",

            // other
            "fdisk",
            "dialog",
            "e2fsprogs",
            "cloud-guest-utils",
            "mawk",
            "sed",
            "gdisk",
            "uuid-runtime",
            "kexec-tools",
            "less",
            "sudo",
            "nano"
        ],

        "variant": "minbase",
        "suite": "bookworm",
        "url": "http://snapshot.debian.org/archive/debian/20250809T133719Z",

        "hook-directory": "hooks"
    },

    // setup rootfs
    {
        "type": "smart-chroot",
        "name": "rootfs directory with setup",
        "export": false,

        "manual_validation": true,
        "use_systemd_container": true,
        "source": "debian directory",
        "scripts": [
            "chroot/setup.sh"
        ]
    },

    // add files to rootfs
    {
        "type": "directory",
        "name": "rootfs directory",
        "export": false,

        "directories": [
            ["/system", [0, 0, "0755"]],
            ["/system/media", [0, 0, "0700"]],

            ["/realrootroot", [0, 0, "0755"]],

            ["/data", [10000, 10000, "0700"]],
            ["/home/user/.config", [10000, 10000, "0700"]]
        ],

        "items": [
            ["rootfs directory with setup", "."],
            ["files/system", "/system", [0, 0, "0755"]],
            ["files/99-mount.rules", "/etc/udev/rules.d/99-mount.rules", [0, 0, "0644"]],

            ["files/user_config", "/home/user/.config", [10000, 10000, "0600"]],
            ["files/etc", "/etc", [0, 0, "0644"]],
            ["files/systemd_config", "/etc/systemd", [0, 0, "0644"]],

            ["custom_init.sh", "/usr/share/initramfs-tools/init", [0, 0, "0755"]],
            ["custom_init_hook.sh", "/etc/initramfs-tools/hooks/custom_init_hook.sh", [0, 0, "0755"]],
            ["preinit.sh", "/preinit.sh", [0, 0, "0755"]]
        ]
    }
]
