[
    // install basic debian system
    {
        "type": "debian",
        "name": "debian directory",
        "export": false,

        "include": [
            "initramfs-tools",
            "plymouth",
            "plymouth-themes",

            // systemd
            "systemd",
            "systemd-sysv",
            "dbus",
            "dbus-user-session",

            // audio
            //"pipewire",
            //"pipewire-alsa",
            //"pipewire-pulse",
            //"wireplumber",

            // graphic
            "xdg-desktop-portal",
            "xdg-desktop-portal-kde",
            "xdg-utils",
            "plasma-desktop",
            "plasma-workspace",
            "plasma-workspace-wayland",
            "plasma-widgets-addons",
            "plasma-desktop-data",
            "qml-module-org-kde-kirigami2",
            "qml-module-org-kde-kquickcontrolsaddons",
            "qml-module-org-kde-qqc2desktopstyle",
            "qml-module-qtquick-controls2",
            "qml-module-qtquick-layouts",
            "kwin-wayland",
            "fonts-dejavu",
            "sddm",

            // system
            "bindfs",
            "udisks2",
            "upower",

            // apps
            "konsole",
            "dolphin",

            // libs
            "libkf5itemmodels5",
            "qml-module-qt-labs-platform",
            "qml6-module-qt-labs-platform",

            // other
            "fdisk",
            "dialog",
            "e2fsprogs",
            "cloud-guest-utils",
            "mawk",
            "sed",
            "gdisk",
            "uuid-runtime",
            "kexec-tools",
            "less",
            "sudo",
            "nano"
        ],

        "variant": "minbase",
        "suite": "bookworm",
        "url": "http://snapshot.debian.org/archive/debian/20250809T133719Z",

        "hook-directory": "hooks"
    },

    // setup rootfs
    {
        "type": "smart-chroot",
        "name": "rootfs directory with setup",
        "export": false,

        "use_systemd_container": true,
        "source": "debian directory",
        "scripts": [
            "chroot/setup.sh"
        ]
    },

    // add files to rootfs
    {
        "type": "directory",
        "name": "rootfs directory",
        "export": false,

        "directories": [
            ["/system", [0, 0, "0700"]],
            ["/home/user/.config", [10000, 10000, "0700"]]
        ],

        "items": [
            ["rootfs directory with setup", "."],
            ["files/system", "/system", [0, 0, "0700"]],

            ["files/locale", "/etc/default/locale", [0, 0, "0644"]],
            ["files/sddm.conf", "/etc/sddm.conf", [0, 0, "0644"]],
            ["files/logind.conf", "/etc/systemd/logind.conf", [0, 0, "0644"]],
            ["files/99-bindfs.rules", "/etc/udev/rules.d/99-bindfs.rules", [0, 0, "0644"]],
            ["files/user_config", "/home/user/.config", [0, 0, "0644"]],

            ["custom_init.sh", "/usr/share/initramfs-tools/init", [0, 0, "0755"]],
            ["custom_init_hook.sh", "/etc/initramfs-tools/hooks/custom_init_hook.sh", [0, 0, "0755"]],

            ["files/plasma/Uflinux Wallpaper", "/usr/share/wallpapers/Uflinux Wallpaper", [0, 0, "0755"]]
        ]
    }
]
